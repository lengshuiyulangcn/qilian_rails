<!-- Page Content -->
  <div class="row">
      <div class="col-lg-12">
        <h1 class="page-header">
          发送邮件
        </h1>
      </div>
  </div>
  <div class="row">
    <div class="col-lg-12">
      <%= form_tag(qilian_mail_index_path, method: :post) do %>
      <div class="form-group">
        <label>邮件标题</label>
        <%= text_field_tag :title, "", class: 'form-control', required: true %>
      </div>

      <div class="form-group" id='editor'>
        <label>邮件内容</label>
        <div class="wmd-panel">
          <div id="wmd-button-bar"></div>
          <%=text_area_tag :content, "", class: 'wmd-input', id: 'wmd-input', rows: 20, 'v-model'=> 'input',required: true %>
        </div>
        <label>预览</label>
        <div class="wmd-panel">
          <div id="wmd-preview" class="wmd-preview"></div>
        </div>
      </div>
      <button type="submit" class="btn btn-primary">发送邮件</button>
    <% end %>
        注意: 邮件不会保存到数据库，请查看自己的邮箱
  </div>
  </div>
  

<!-- Include jquery.uplaod-1.0.2.min.js For Realtime Image Display -->
<script>
 (function () {
                var converter1 = Markdown.getSanitizingConverter();
                converter1.hooks.chain("preBlockGamut", function (text, rbg) {
                    return text.replace(/^ {0,3}""" *\n((?:.*?\n)+?) {0,3}""" *$/gm, function (whole, inner) {
                        return "<blockquote>" + rbg(inner) + "</blockquote>\n";
                    });
                });
                var editor1 = new Markdown.Editor(converter1);
                editor1.run();
            })();
</script>

